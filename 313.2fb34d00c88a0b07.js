"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[313],{313:(U,h,s)=>{s.r(h),s.d(h,{DynamicSMSModule:()=>X});var u=s(177),d=s(6627),m=s(7945),t=s(4438),y=s(1626),M=s(1387);let g=(()=>{class i{constructor(e,n){this.httpClient=e,this.baseRequestService=n}listSMSs(){return this.httpClient.get(m.f.basUrl+"dynamic-sms")}getSMSByID(e){return this.httpClient.get(m.f.basUrl+"dynamic-sms/"+e)}deleteSMS(e){return this.httpClient.post(m.f.basUrl+"deleteitem",e)}dynamicSMS(e,n){return n?this.httpClient.put(m.f.basUrl+"dynamic-sms/"+n,e):this.httpClient.post(m.f.basUrl+"dynamic-sms",e)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(y.Qq),t.KVO(M.E))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var R=s(2145),c=s(8018),p=s(9998),S=s(7313),F=s(9021),_=s(5144),f=s(1141),b=s(8005),k=s(5779);function j(i,l){1&i&&t.nrm(0,"app-loading-shimmer")}function D(i,l){if(1&i){const e=t.RV6();t.j41(0,"li",16),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG(2).$implicit;return t.Njj(a.command({id:o.id}))}),t.j41(1,"a",17),t.nrm(2,"span",18),t.j41(3,"span",19),t.EFF(4),t.k0s()()()}if(2&i){const e=l.$implicit;t.R7$(),t.BMQ("aria-label",e.label),t.R7$(),t.HbH(e.icon),t.R7$(2),t.JRh(e.label)}}function T(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"div",12),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.viewDetails(a))}),t.j41(13,"div")(14,"p-menu",13,1),t.DNE(16,D,5,4,"ng-template",14),t.k0s(),t.j41(17,"p-button",15),t.bIt("onClick",function(a){t.eBV(e);const o=t.sdS(15);return t.Njj(o.toggle(a))}),t.k0s()()()()()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Lme("",e.id," ",e.lastName,""),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.message),t.R7$(2),t.JRh(e.limit_orders),t.R7$(2),t.JRh(e.created_at),t.R7$(4),t.Y8G("model",n.actionOptions)("popup",!0),t.R7$(3),t.Y8G("text",!0)}}function I(i,l){1&i&&(t.j41(0,"td"),t.nrm(1,"p-skeleton"),t.k0s())}function $(i,l){if(1&i&&(t.j41(0,"tr"),t.Z7z(1,I,2,0,"td",null,t.Vm6),t.j41(3,"td"),t.nrm(4,"p-skeleton"),t.k0s()()),2&i){const e=t.XpG(3);t.R7$(),t.Dyx(e.items.headers)}}function L(i,l){if(1&i&&t.DNE(0,T,18,9,"tr")(1,$,5,0,"tr"),2&i){const e=t.XpG(2);t.vxM(0,e.isLoadingFilter?-1:0),t.R7$(),t.vxM(1,e.isLoadingFilter?1:-1)}}function x(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),t.nI1(3,"translate"),t.bIt("pageChange",function(a){t.eBV(e);const o=t.XpG();return t.Njj(o.onPageChange(a))})("pageSizeChange",function(a){t.eBV(e);const o=t.XpG();return t.Njj(o.onPageSizeChange(a))})("search",function(a){t.eBV(e);const o=t.XpG();return t.Njj(o.onSearch(a))})("buttonClick",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.openComponent())}),t.k0s(),t.DNE(4,L,2,2,"ng-template",null,0,t.C5r),t.k0s()()}if(2&i){const e=t.sdS(5),n=t.XpG();t.R7$(2),t.Y8G("items",n.items)("hasHeader",!0)("enablePagination",!1)("showBtn",n.addItem)("enableSorting",!1)("initialPageSize",n.size)("totalRecords",null==n.paginationResponse?null:n.paginationResponse.total)("bodyTemplate",e)("customTemplate",!0)("showBtn",!0)("buttonText",t.bMT(3,12,"Add SMS"))("HandelRenderingDataMessage",n.HandelRenderingDataMessage)}}let E=(()=>{class i extends R.j{constructor(e,n,a,o){super(o),this.router=e,this.injector=n,this.alertService=a,this.Urls=m.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:v=>{v?.id&&this.router.navigate(["/admin/dynamic-sms/edit",v.id])}}],this.items={tableHeader:"Categories",headers:["ID","Name","message","limit_orders","Created On","Actions"],data:[]}}openComponent(){this.router.navigate(["/admin/dynamic-sms/add"])}list(e){e?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(g).listSMSs().subscribe({next:a=>{this.categoriesList=a.data,this.items.data=a.data,this.paginationResponse={...a?.meta,...a?.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==a.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:a=>{this.errorMessage=a.error.errors}})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(d.Ix),t.rXU(t.zZn),t.rXU(b.n),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-list"]],standalone:!0,features:[t.Vt3,t.aNF],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dynamic-sms"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"actions",3,"click"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(n,a){1&n&&(t.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()(),t.nrm(6,"p-toast"),t.j41(7,"div",6)(8,"div",7)(9,"div",8),t.DNE(10,j,1,0,"app-loading-shimmer")(11,x,6,14,"div",9),t.k0s()()()),2&n&&(t.R7$(4),t.SpI(" ",t.bMT(5,3,"dynamic-sms"),""),t.R7$(6),t.vxM(10,a.isLoadingItems?10:-1),t.R7$(),t.vxM(11,a.isLoadingItems?-1:11))},dependencies:[c.h,c.D9,p.MB,p.y8,k.Ei,S.f,F.J,_.Mk,_.W1,d.Wk,f.tm,f.$n]})}}return i})();var r=s(9417);function G(i,l){if(1&i&&(t.j41(0,"div",20),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}let C=(()=>{class i{constructor(e,n,a,o){this.router=e,this.injector=n,this.fb=a,this.alertService=o,this.errorMessage="",this.isEditPage=!1,this.uploadForm=this.fb.group({ar_name:["",[r.k0.required,r.k0.minLength(3)]],en_name:["",[r.k0.required,r.k0.minLength(3)]],ar_message:["",[r.k0.required,r.k0.minLength(3)]],en_message:["",[r.k0.required,r.k0.minLength(3)]],limit_orders:["",[r.k0.required,r.k0.min(1)]]})}ngOnInit(){this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getName(e,n){return"ar"==n?JSON.parse(e)?.ar:JSON.parse(e)?.en}getIDfromUrl(){const n=this.router.url.match(/\/edit\/(\d+)/);n&&(this.id=n[1],this.getDataByID(this.id))}getDataByID(e){this.injector.get(g).getSMSByID(e).subscribe({next:a=>{this.currentData=a.data},error:a=>{this.errorMessage=a.error.errors}})}submitData(){this.uploadForm.valid&&this.injector.get(g).dynamicSMS(this.uploadForm.value,this.id).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.router.navigate(["/admin/dynamic-sms"])},error:n=>{this.errorMessage=n.error.message}})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(d.Ix),t.rXU(t.zZn),t.rXU(r.ok),t.rXU(b.n))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-form"]],standalone:!0,features:[t.aNF],decls:44,vars:44,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","autocomplete","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","ar_message",1,"form-label"],["type","text","id","ar_message","formControlName","ar_message","required","",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","autocomplete","current-en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","en_message",1,"form-label"],["type","text","id","en_message","autocomplete","current-en_message","required","","formControlName","en_message",1,"form-control",3,"placeholder","ngModel"],["for","limit_orders",1,"form-label"],["type","number","id","limit_orders","required","","formControlName","limit_orders",1,"form-control",3,"placeholder","ngModel"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[1,"error-message","text-danger"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"p-toast"),t.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"div",6)(16,"label",9),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",10),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",6)(22,"label",11),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.nrm(25,"input",12),t.nI1(26,"translate"),t.k0s(),t.j41(27,"div",6)(28,"label",13),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.nrm(31,"input",14),t.nI1(32,"translate"),t.k0s(),t.j41(33,"div",6)(34,"label",15),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.nrm(37,"input",16),t.nI1(38,"translate"),t.k0s(),t.j41(39,"div",17)(40,"button",18),t.bIt("click",function(){return a.submitData()}),t.EFF(41),t.nI1(42,"translate"),t.k0s()()(),t.DNE(43,G,2,1,"div",19),t.k0s()()()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,20,a.isEditPage?"edit SMS":"Add SMS")),t.R7$(6),t.Y8G("formGroup",a.uploadForm),t.R7$(3),t.JRh(t.bMT(12,22,"ar_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(14,24,"ar_name"))("ngModel",null==a.currentData?null:a.currentData.name),t.R7$(4),t.JRh(t.bMT(18,26,"ar_message")),t.R7$(2),t.Y8G("placeholder",t.bMT(20,28,"ar_message"))("ngModel",null==a.currentData?null:a.currentData.message),t.R7$(4),t.JRh(t.bMT(24,30,"en_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(26,32,"en_name"))("ngModel",null==a.currentData?null:a.currentData.name),t.R7$(4),t.JRh(t.bMT(30,34,"en_message")),t.R7$(2),t.Y8G("placeholder",t.bMT(32,36,"en_message"))("ngModel",null==a.currentData?null:a.currentData.message),t.R7$(4),t.JRh(t.bMT(36,38,"limit_orders")),t.R7$(2),t.Y8G("placeholder",t.bMT(38,40,"limit_orders"))("ngModel",null==a.currentData?null:a.currentData.limit_orders),t.R7$(3),t.Y8G("disabled",a.uploadForm.invalid),t.R7$(),t.JRh(t.bMT(42,42,"Save")),t.R7$(2),t.Y8G("ngIf",a.errorMessage))},dependencies:[c.h,c.D9,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.j4,r.JD,p.MB,p.y8,u.MD,u.bT],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return i})();const N=[{path:"",component:E},{path:"add",component:C},{path:"edit/:id",component:C}];let B=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(N),d.iI]})}}return i})(),X=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[u.MD,B]})}}return i})()}}]);