"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[158],{5158:(X,c,i)=>{i.r(c),i.d(c,{CouponsModule:()=>B});var g=i(177),u=i(6627),m=i(9421),M=i(2145),F=i(7945),e=i(4438),h=i(8005),y=i(5779),_=i(9021),f=i(7313),b=i(5144),v=i(1141),p=i(8018);function k(r,l){1&r&&e.nrm(0,"app-loading-shimmer")}function j(r,l){if(1&r){const n=e.RV6();e.j41(0,"li",16),e.bIt("click",function(){const t=e.eBV(n).$implicit,s=e.XpG(2).$implicit;return e.Njj(t.command({id:s.id}))}),e.j41(1,"a",17),e.nrm(2,"span",18),e.j41(3,"span",19),e.EFF(4),e.k0s()()()}if(2&r){const n=l.$implicit;e.R7$(),e.BMQ("aria-label",n.label),e.R7$(),e.HbH(n.icon),e.R7$(2),e.JRh(n.label)}}function x(r,l){if(1&r){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td")(20,"div",12)(21,"div")(22,"p-menu",13,1),e.DNE(24,j,5,4,"ng-template",14),e.k0s(),e.j41(25,"p-button",15),e.bIt("onClick",function(t){e.eBV(n);const s=e.sdS(23);return e.Njj(s.toggle(t))}),e.k0s()()()()()}if(2&r){const n=e.XpG().$implicit,a=e.XpG(2);e.R7$(2),e.Lme("",n.id," ",n.lastName,""),e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.serial),e.R7$(2),e.JRh(n.type),e.R7$(2),e.JRh(n.value),e.R7$(2),e.JRh(n.max_value),e.R7$(2),e.JRh(n.max_number_of_users),e.R7$(2),e.JRh(n.created_at),e.R7$(2),e.JRh(n.expiration_at),e.R7$(4),e.Y8G("model",a.actionOptions)("popup",!0),e.R7$(3),e.Y8G("text",!0)}}function T(r,l){1&r&&(e.j41(0,"td"),e.nrm(1,"p-skeleton"),e.k0s())}function $(r,l){if(1&r&&(e.j41(0,"tr"),e.Z7z(1,T,2,0,"td",null,e.Vm6),e.j41(3,"td"),e.nrm(4,"p-skeleton"),e.k0s()()),2&r){const n=e.XpG(3);e.R7$(),e.Dyx(n.items.headers)}}function D(r,l){if(1&r&&e.DNE(0,x,26,13,"tr")(1,$,5,0,"tr"),2&r){const n=e.XpG(2);e.vxM(0,n.isLoadingFilter?-1:0),e.R7$(),e.vxM(1,n.isLoadingFilter?1:-1)}}function I(r,l){if(1&r){const n=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),e.nI1(3,"translate"),e.bIt("pageChange",function(t){e.eBV(n);const s=e.XpG();return e.Njj(s.onPageChange(t))})("pageSizeChange",function(t){e.eBV(n);const s=e.XpG();return e.Njj(s.onPageSizeChange(t))})("search",function(t){e.eBV(n);const s=e.XpG();return e.Njj(s.onSearch(t))})("buttonClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.openComponent())}),e.k0s(),e.DNE(4,D,2,2,"ng-template",null,0,e.C5r),e.k0s()()}if(2&r){const n=e.sdS(5),a=e.XpG();e.R7$(2),e.Y8G("items",a.items)("hasHeader",!0)("enablePagination",!0)("showBtn",a.addItem)("enableSorting",!1)("initialPageSize",a.size)("totalRecords",null==a.paginationResponse?null:a.paginationResponse.total)("bodyTemplate",n)("customTemplate",!0)("showBtn",!0)("buttonText",e.bMT(3,12,"Add Coupon"))("HandelRenderingDataMessage",a.HandelRenderingDataMessage)}}let E=(()=>{class r extends M.j{constructor(n,a,t,s){super(s),this.router=n,this.injector=a,this.alertService=t,this.Urls=F.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:d=>{d?.id&&this.router.navigate(["/admin/coupons/edit",d.id])}},{label:"Delete",icon:"pi pi-trash text-danger",command:d=>{d?.id&&(this.deleteData(d.id),this.deleteData(d.id))}}],this.items={tableHeader:"Services",headers:["ID","Name","Serial","Type","Value","Max_value","Max Number Of Users","Created On","Expiration ON","Actions"],data:[]}}openComponent(){this.router.navigate(["/admin/coupons/add"])}list(n){n?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(m.r).listCoupons().subscribe({next:t=>{this.categoriesList=t.data,this.items.data=t.data,this.paginationResponse={...t.meta,...t.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==t.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:t=>{this.errorMessage=t.error.errors}})}deleteData(n){this.injector.get(m.r).deleteCoupons({id:n,table:"coupons"}).subscribe({next:t=>{this.alertService.toast({severity:"success",summary:"",detail:t.message}),this.list()},error:t=>{this.errorMessage=t.error.errors}})}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(u.Ix),e.rXU(e.zZn),e.rXU(h.n),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-list"]],features:[e.Vt3],decls:11,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/coupons"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"actions"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(a,t){1&a&&(e.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8),e.DNE(9,k,1,0,"app-loading-shimmer")(10,I,6,14,"div",9),e.k0s()()()),2&a&&(e.R7$(4),e.SpI(" ",e.bMT(5,3,"Coupons"),""),e.R7$(5),e.vxM(9,t.isLoadingItems?9:-1),e.R7$(),e.vxM(10,t.isLoadingItems?-1:10))},dependencies:[u.Wk,y.Ei,_.J,f.f,b.W1,v.$n,p.D9]})}}return r})();var o=i(9417),R=i(9998);function J(r,l){if(1&r&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.SpI(" ",n.errorMessage," ")}}let C=(()=>{class r{constructor(n,a,t){this.router=n,this.injector=a,this.alertService=t,this.errorMessage="",this.isEditPage=!1,this.orderForm=new o.gE({ar_name:new o.MJ(null,[o.k0.required]),en_name:new o.MJ(null,[o.k0.required]),serial:new o.MJ(null,[o.k0.required]),type:new o.MJ(null,[o.k0.required]),expiration_at:new o.MJ(null,[o.k0.required]),max_number_of_users:new o.MJ(null,[o.k0.required]),max_usage_per_user:new o.MJ(null,[o.k0.required]),value:new o.MJ(null,[o.k0.required]),max_value:new o.MJ(null,[o.k0.required])})}ngOnInit(){this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getIDfromUrl(){const a=this.router.url.match(/\/edit\/(\d+)/);a&&(this.id=a[1],this.getDataByID(this.id))}getDataByID(n){this.injector.get(m.r).getDataByID(n).subscribe({next:t=>{this.currentData=t.data,console.log(this.currentData)},error:t=>{this.errorMessage=t.error.errors}})}submitData(){this.orderForm.valid&&this.injector.get(m.r).coupons(this.orderForm.value,this.id).subscribe({next:a=>{this.alertService.toast({severity:"success",summary:"",detail:a.message}),this.router.navigate(["/admin/coupons"])},error:a=>{this.errorMessage=a.error.message}})}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(u.Ix),e.rXU(e.zZn),e.rXU(h.n))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-form"]],decls:76,vars:78,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","serial",1,"form-label"],["type","text","id","serial","required","","formControlName","serial",1,"form-control",3,"placeholder","ngModel"],["for","type",1,"form-label"],["formControlName","type",1,"form-select","mb-3",3,"ngModel"],["selected",""],["value","percentage"],["value","fixed"],["for","max_number_of_users",1,"form-label"],["type","number","id","max_number_of_users","required","","formControlName","max_number_of_users",1,"form-control",3,"placeholder","ngModel"],["for","max_usage_per_user",1,"form-label"],["type","number","id","max_usage_per_user","required","","formControlName","max_usage_per_user",1,"form-control",3,"placeholder","ngModel"],["for","value",1,"form-label"],["type","number","id","value","required","","formControlName","value",1,"form-control",3,"placeholder","ngModel"],["for","max_value",1,"form-label"],["type","number","id","max_value","required","","formControlName","max_value",1,"form-control",3,"placeholder","ngModel"],["for","expiration_at",1,"form-label"],["dir","auto","type","date","id","expiration_at","mask","d0-M0-0000","required","","formControlName","expiration_at",1,"form-control",3,"placeholder","ngModel"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[1,"error-message","text-danger"]],template:function(a,t){1&a&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"p-toast"),e.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"input",8),e.nI1(14,"translate"),e.k0s(),e.j41(15,"div",6)(16,"label",9),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.nrm(19,"input",10),e.nI1(20,"translate"),e.k0s(),e.j41(21,"div",6)(22,"label",11),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.nrm(25,"input",12),e.nI1(26,"translate"),e.k0s(),e.j41(27,"div",6)(28,"label",13),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"select",14)(32,"option",15),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"option",16),e.EFF(36),e.nI1(37,"translate"),e.k0s(),e.j41(38,"option",17),e.EFF(39),e.nI1(40,"translate"),e.k0s()()(),e.j41(41,"div",6)(42,"label",18),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.nrm(45,"input",19),e.nI1(46,"translate"),e.k0s(),e.j41(47,"div",6)(48,"label",20),e.EFF(49),e.nI1(50,"translate"),e.k0s(),e.nrm(51,"input",21),e.nI1(52,"translate"),e.k0s(),e.j41(53,"div",6)(54,"label",22),e.EFF(55),e.nI1(56,"translate"),e.k0s(),e.nrm(57,"input",23),e.nI1(58,"translate"),e.k0s(),e.j41(59,"div",6)(60,"label",24),e.EFF(61),e.nI1(62,"translate"),e.k0s(),e.nrm(63,"input",25),e.nI1(64,"translate"),e.k0s(),e.j41(65,"div",6)(66,"label",26),e.EFF(67),e.nI1(68,"translate"),e.k0s(),e.nrm(69,"input",27),e.nI1(70,"translate"),e.k0s(),e.j41(71,"div",28)(72,"button",29),e.bIt("click",function(){return t.submitData()}),e.EFF(73),e.nI1(74,"translate"),e.k0s()()(),e.DNE(75,J,2,1,"div",30),e.k0s()()()()),2&a&&(e.R7$(2),e.JRh(e.bMT(3,34,t.isEditPage?"edit coupon":"add a new coupon")),e.R7$(6),e.Y8G("formGroup",t.orderForm),e.R7$(3),e.JRh(e.bMT(12,36,"ar_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(14,38,"ar_name"))("ngModel",null==t.currentData?null:t.currentData.name),e.R7$(4),e.JRh(e.bMT(18,40,"en_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(20,42,"en_name"))("ngModel",null==t.currentData?null:t.currentData.name),e.R7$(4),e.JRh(e.bMT(24,44,"serial")),e.R7$(2),e.Y8G("placeholder",e.bMT(26,46,"serial"))("ngModel",null==t.currentData?null:t.currentData.serial),e.R7$(4),e.JRh(e.bMT(30,48,"type")),e.R7$(2),e.Y8G("ngModel","percentage"==(null==t.currentData?null:t.currentData.type)?"percentage":"fixed"),e.R7$(2),e.JRh(e.bMT(34,50,"Select type")),e.R7$(3),e.JRh(e.bMT(37,52,"Percentage")),e.R7$(3),e.JRh(e.bMT(40,54,"Fixed")),e.R7$(4),e.JRh(e.bMT(44,56,"max_number_of_users")),e.R7$(2),e.Y8G("placeholder",e.bMT(46,58,"max_number_of_users"))("ngModel",null==t.currentData?null:t.currentData.max_number_of_users),e.R7$(4),e.JRh(e.bMT(50,60,"max_usage_per_user")),e.R7$(2),e.Y8G("placeholder",e.bMT(52,62,"max_usage_per_user"))("ngModel",null==t.currentData?null:t.currentData.max_usage_per_user),e.R7$(4),e.JRh(e.bMT(56,64,"Value")),e.R7$(2),e.Y8G("placeholder",e.bMT(58,66,"Value"))("ngModel",null==t.currentData?null:t.currentData.value),e.R7$(4),e.JRh(e.bMT(62,68,"max_value")),e.R7$(2),e.Y8G("placeholder",e.bMT(64,70,"max_value"))("ngModel",null==t.currentData?null:t.currentData.max_value),e.R7$(4),e.JRh(e.bMT(68,72,"expiration_at")),e.R7$(2),e.Y8G("placeholder",e.bMT(70,74,"dd/mm/yyyy"))("ngModel",null==t.currentData?null:t.currentData.expiration_at),e.R7$(3),e.Y8G("disabled",t.orderForm.invalid),e.R7$(),e.JRh(e.bMT(74,76,"Save")),e.R7$(2),e.Y8G("ngIf",t.errorMessage))},dependencies:[g.bT,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.YS,o.j4,o.JD,R.y8,p.D9],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return r})();const L=[{path:"",component:E},{path:"add",component:C},{path:"edit/:id",component:C}];let G=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({providers:[m.r],imports:[u.iI.forChild(L),u.iI]})}}return r})();var S=i(8833),N=i(8848);let B=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({providers:[m.r],imports:[g.MD,G,o.X1,p.h,S.kr,N.q,_.J,f.f,b.Mk,v.tm,R.MB]})}}return r})()}}]);