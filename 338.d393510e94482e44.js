"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[338],{6338:(O,f,o)=>{o.r(f),o.d(f,{ServicesModule:()=>H});var _=o(177),m=o(6627),c=o(7945),e=o(4438),T=o(1626),D=o(1387);let p=(()=>{class a{constructor(t,i){this.httpClient=t,this.baseRequestService=i}listServices(t){return this.httpClient.get(c.f.basUrl+`services${this.baseRequestService.prepareParams(t)}`)}getDataByID(t){return this.httpClient.get(c.f.basUrl+"services/"+t)}services(t,i){return i?this.httpClient.put(c.f.basUrl+"services/"+i,t):this.httpClient.post(c.f.basUrl+"services",t)}deleteCategory(t){return this.httpClient.post(c.f.basUrl+"deleteitem",t)}static{this.\u0275fac=function(i){return new(i||a)(e.KVO(T.Qq),e.KVO(D.E))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var I=o(2145),g=o(8005),u=o(5779),v=o(9021),C=o(7313),b=o(5144),F=o(1141),R=o(9998),h=o(8018);function $(a,d){1&a&&e.nrm(0,"app-loading-shimmer")}function L(a,d){if(1&a){const t=e.RV6();e.j41(0,"li",17),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2).$implicit;return e.Njj(n.command({id:s.id}))}),e.j41(1,"a",18),e.nrm(2,"span",19),e.j41(3,"span",20),e.EFF(4),e.k0s()()()}if(2&a){const t=d.$implicit;e.R7$(),e.BMQ("aria-label",t.label),e.R7$(),e.HbH(t.icon),e.R7$(2),e.JRh(t.label)}}function S(a,d){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.nrm(10,"img",12),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.viewDetails(n))}),e.j41(15,"div")(16,"p-menu",14,1),e.DNE(18,L,5,4,"ng-template",15),e.k0s(),e.j41(19,"p-button",16),e.bIt("onClick",function(n){e.eBV(t);const s=e.sdS(17);return e.Njj(s.toggle(n))}),e.k0s()()()()()}if(2&a){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.Lme("",t.id," ",t.lastName,""),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.info),e.R7$(2),e.JRh(null==t.category?null:t.category.name),e.R7$(2),e.FCK("src","",null==i.Urls?null:i.Urls.url,"images/",t.image.name,"",e.B4B),e.R7$(2),e.JRh(t.created_at),e.R7$(4),e.Y8G("model",i.actionOptions)("popup",!0),e.R7$(3),e.Y8G("text",!0)}}function E(a,d){1&a&&(e.j41(0,"td"),e.nrm(1,"p-skeleton"),e.k0s())}function x(a,d){if(1&a&&(e.j41(0,"tr"),e.Z7z(1,E,2,0,"td",null,e.Vm6),e.j41(3,"td"),e.nrm(4,"p-skeleton"),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(),e.Dyx(t.items.headers)}}function G(a,d){if(1&a&&e.DNE(0,S,20,12,"tr")(1,x,5,0,"tr"),2&a){const t=e.XpG(2);e.vxM(0,t.isLoadingFilter?-1:0),e.R7$(),e.vxM(1,t.isLoadingFilter?1:-1)}}function B(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),e.nI1(3,"translate"),e.bIt("pageChange",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onPageChange(n))})("pageSizeChange",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onPageSizeChange(n))})("search",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onSearch(n))})("buttonClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openComponent())}),e.k0s(),e.DNE(4,G,2,2,"ng-template",null,0,e.C5r),e.k0s()()}if(2&a){const t=e.sdS(5),i=e.XpG();e.R7$(2),e.Y8G("items",i.items)("hasHeader",!0)("enablePagination",!0)("showBtn",i.addItem)("enableSorting",!1)("initialPageSize",i.size)("totalRecords",null==i.paginationResponse?null:i.paginationResponse.total)("bodyTemplate",t)("customTemplate",!0)("showBtn",!0)("buttonText",e.bMT(3,12,"Add service"))("HandelRenderingDataMessage",i.HandelRenderingDataMessage)}}let U=(()=>{class a extends I.j{constructor(t,i,n,s){super(s),this.router=t,this.injector=i,this.alertService=n,this.Urls=c.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:l=>{l?.id&&(console.log("edit",l.id),this.router.navigate(["/admin/services/edit",l.id]))}},{label:"Delete",icon:"pi pi-trash text-danger",command:l=>{l?.id&&this.deleteData(l.id)}}],this.items={tableHeader:"Services",headers:["ID","Name","Info","Category","Image","Created On","Actions"],data:[]}}openComponent(){this.router.navigate(["/admin/services/add"])}list(t){t?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(p).listServices(this.request)?.subscribe({next:n=>{this.categoriesList=n.data,this.items.data=n.data,this.paginationResponse={...n.meta,...n.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==n.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:n=>{this.errorMessage=n.error.errors}})}deleteData(t){this.injector.get(p).deleteCategory({id:t,table:"services"}).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.list()},error:n=>{this.errorMessage=n.error.errors}})}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.Ix),e.rXU(e.zZn),e.rXU(g.n),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-list"]],features:[e.Vt3],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/services"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"image-fluid",3,"src"],[1,"actions",3,"click"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(i,n){1&i&&(e.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()(),e.nrm(6,"p-toast"),e.j41(7,"div",6)(8,"div",7)(9,"div",8),e.DNE(10,$,1,0,"app-loading-shimmer")(11,B,6,14,"div",9),e.k0s()()()),2&i&&(e.R7$(4),e.SpI(" ",e.bMT(5,3,"Services"),""),e.R7$(6),e.vxM(10,n.isLoadingItems?10:-1),e.R7$(),e.vxM(11,n.isLoadingItems?-1:11))},dependencies:[m.Wk,u.Ei,v.J,C.f,b.W1,F.$n,R.y8,h.D9],styles:["img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:100%}"]})}}return a})();var y=o(467),r=o(9417),N=o(6091),M=o(8833),k=o(8848);const X=()=>({standalone:!0});function J(a,d){if(1&a&&(e.j41(0,"div",26)(1,"div"),e.EFF(2),e.k0s()()),2&a){const t=d.$implicit;e.R7$(2),e.JRh(t.name)}}function V(a,d){if(1&a&&(e.j41(0,"div",26)(1,"div"),e.EFF(2),e.k0s()()),2&a){const t=d.$implicit;e.R7$(2),e.JRh(t.name)}}function A(a,d){if(1&a&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}let j=(()=>{class a{constructor(t,i,n,s){this.router=t,this.injector=i,this.alertService=n,this.fb=s,this.errorMessage="",this.fileAddedBeforeArrayMuti=[],this.isEditPage=!1,this.selectedFile=null,this.categoriesList=[],this.uploadForm=this.fb.group({ar_name:["",[r.k0.required,r.k0.minLength(3)]],ar_info:["",[r.k0.required,r.k0.minLength(3)]],en_info:["",[r.k0.required,r.k0.minLength(3)]],en_name:["",[r.k0.required,r.k0.minLength(3)]],category_id:["",[r.k0.required]],price:["",[r.k0.required,r.k0.min(0)]]})}ngOnInit(){this.getAllCategories(),this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}changeValue(t,i){return this.uploadForm.get(i)?.setValue(t),!0}changeTouche(t){return this.uploadForm.get(t)?.markAsTouched(),!0}onRemoveFile(t){var i=this;return(0,y.A)(function*(){i.uploadForm.get("image")?.reset(null),t.length&&i.onUploadSuccess(t)})()}onUploadSuccess(t){var i=this;return(0,y.A)(function*(){i.selectedFile=t})()}getIDfromUrl(){const i=this.router.url.match(/\/edit\/(\d+)/);i&&(this.id=i[1],this.getDataByID(this.id))}getDataByID(t){this.injector.get(p).getDataByID(t).subscribe({next:n=>{this.currentData=n.data,this.category_id=n.data.category},error:n=>{this.errorMessage=n.error.errors}})}getAllCategories(){this.injector.get(N.M).listCategory().subscribe({next:i=>{this.categoriesList=i.data},error:i=>{this.errorMessage=i.error.errors}})}submitData(){if(this.selectedFile&&this.category_id.id){const t=new FormData;t.append("ar_name",this.uploadForm.get("ar_name")?.value),t.append("ar_info",this.uploadForm.get("ar_info")?.value),t.append("en_info",this.uploadForm.get("en_info")?.value),t.append("en_name",this.uploadForm.get("en_name")?.value),t.append("category_id",this.category_id.id),t.append("price",this.uploadForm.get("price")?.value),t.append("image",this.selectedFile),this.injector.get(p).services(t,this.id).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.router.navigate(["/admin/services"])},error:n=>{this.errorMessage=n.error.message}})}}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.Ix),e.rXU(e.zZn),e.rXU(g.n),e.rXU(r.ok))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-form"]],decls:56,vars:61,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","ar_info",1,"form-label"],["type","text","id","ar_info","required","","formControlName","ar_info",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","en_info",1,"form-label"],["type","text","id","en_info","required","","formControlName","en_info",1,"form-control",3,"placeholder","ngModel"],["for","Category",1,"form-label"],["optionLabel","name","filterBy","name",3,"ngModelChange","ngModel","ngModelOptions","options","filter","showClear","placeholder"],["pTemplate","selectedItem"],["pTemplate","item"],["for","price",1,"form-label"],["type","number","id","price","required","","formControlName","price",1,"form-control",3,"placeholder","ngModel"],["for","image",1,"form-label"],[3,"onClick","fileRemoved","fileAdded","fileAddedBefore","isMultiple","maxFiles","accepts"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click"],["class","error-message text-danger",4,"ngIf"],[1,"flex","align-items-center","gap-2"],[1,"error-message","text-danger"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",2)(5,"div",3)(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.nrm(12,"input",8),e.nI1(13,"translate"),e.k0s(),e.j41(14,"div",6)(15,"label",9),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.nrm(18,"input",10),e.nI1(19,"translate"),e.k0s(),e.j41(20,"div",6)(21,"label",11),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.nrm(24,"input",12),e.nI1(25,"translate"),e.k0s(),e.j41(26,"div",6)(27,"label",13),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.nrm(30,"input",14),e.nI1(31,"translate"),e.k0s(),e.j41(32,"div",6)(33,"label",15),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"p-dropdown",16),e.nI1(37,"translate"),e.mxI("ngModelChange",function(l){return e.DH7(n.category_id,l)||(n.category_id=l),l}),e.DNE(38,J,3,1,"ng-template",17)(39,V,3,1,"ng-template",18),e.k0s()(),e.j41(40,"div",6)(41,"label",19),e.EFF(42),e.nI1(43,"translate"),e.k0s(),e.nrm(44,"input",20),e.nI1(45,"translate"),e.k0s(),e.j41(46,"div",6)(47,"label",21),e.EFF(48),e.nI1(49,"translate"),e.k0s(),e.j41(50,"app-upload-files",22),e.bIt("onClick",function(l){return n.changeValue(l,"image")})("onClick",function(){return n.changeTouche("image")})("fileRemoved",function(l){return n.onRemoveFile(l)})("fileAdded",function(l){return n.onUploadSuccess(l)}),e.k0s()(),e.j41(51,"div",23)(52,"button",24),e.bIt("click",function(){return n.submitData()}),e.EFF(53),e.nI1(54,"translate"),e.k0s()()(),e.DNE(55,A,2,1,"div",25),e.k0s()()()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,30,n.isEditPage?"edit service":"add a new service")),e.R7$(5),e.Y8G("formGroup",n.uploadForm),e.R7$(3),e.JRh(e.bMT(11,32,"ar_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(13,34,"ar_name"))("ngModel",null==n.currentData?null:n.currentData.name),e.R7$(4),e.JRh(e.bMT(17,36,"ar_info")),e.R7$(2),e.Y8G("placeholder",e.bMT(19,38,"ar_info"))("ngModel",null==n.currentData?null:n.currentData.info),e.R7$(4),e.JRh(e.bMT(23,40,"en_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(25,42,"en_name"))("ngModel",null==n.currentData?null:n.currentData.name),e.R7$(4),e.JRh(e.bMT(29,44,"en_info")),e.R7$(2),e.Y8G("placeholder",e.bMT(31,46,"en_info"))("ngModel",null==n.currentData?null:n.currentData.info),e.R7$(4),e.JRh(e.bMT(35,48,"Category")),e.R7$(2),e.R50("ngModel",n.category_id),e.Y8G("ngModelOptions",e.lJ4(60,X))("options",n.categoriesList)("filter",!0)("showClear",!0)("placeholder",e.bMT(37,50,"Select a Category")),e.R7$(6),e.JRh(e.bMT(43,52,"price")),e.R7$(2),e.Y8G("placeholder",e.bMT(45,54,"price"))("ngModel",null==n.currentData?null:n.currentData.price),e.R7$(4),e.JRh(e.bMT(49,56,"image")),e.R7$(2),e.Y8G("fileAddedBefore",n.fileAddedBeforeArrayMuti)("isMultiple",!1)("maxFiles",1e6),e.R7$(3),e.JRh(e.bMT(54,58,"Save")),e.R7$(2),e.Y8G("ngIf",n.errorMessage))},dependencies:[_.bT,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.j4,r.JD,r.vS,M.ms,u.Ei,k.q,h.D9],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return a})();const P=[{path:"",component:U},{path:"add",component:j},{path:"edit/:id",component:j}];let Y=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(P),m.iI]})}}return a})(),H=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[p,u.td,g.n,u.bg],imports:[_.MD,Y,h.h,r.X1,r.YN,M.kr,k.q,v.J,C.f,b.Mk,F.tm,R.MB]})}}return a})()}}]);