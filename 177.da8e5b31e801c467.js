"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[177],{5177:(B,g,o)=>{o.r(g),o.d(g,{CoutriesModule:()=>X});var b=o(177),c=o(6627),d=o(5593),v=o(2145),F=o(7945),p=o(8018),u=o(9998),y=o(7313),R=o(9021),h=o(5144),_=o(1141),t=o(4438),f=o(8005),j=o(5779);function D(i,l){1&i&&t.nrm(0,"app-loading-shimmer")}function k(i,l){if(1&i){const e=t.RV6();t.j41(0,"li",16),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2).$implicit;return t.Njj(n.command({id:s.id}))}),t.j41(1,"a",17),t.nrm(2,"span",18),t.j41(3,"span",19),t.EFF(4),t.k0s()()()}if(2&i){const e=l.$implicit;t.R7$(),t.BMQ("aria-label",e.label),t.R7$(),t.HbH(e.icon),t.R7$(2),t.JRh(e.label)}}function M(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"div",12),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.viewDetails(n))}),t.j41(9,"div")(10,"p-menu",13,1),t.DNE(12,k,5,4,"ng-template",14),t.k0s(),t.j41(13,"p-button",15),t.bIt("onClick",function(n){t.eBV(e);const s=t.sdS(11);return t.Njj(s.toggle(n))}),t.k0s()()()()()}if(2&i){const e=t.XpG().$implicit,a=t.XpG(2);t.R7$(2),t.Lme("",e.id," ",e.lastName,""),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.created_at),t.R7$(4),t.Y8G("model",a.actionOptions)("popup",!0),t.R7$(3),t.Y8G("text",!0)}}function T(i,l){1&i&&(t.j41(0,"td"),t.nrm(1,"p-skeleton"),t.k0s())}function x(i,l){if(1&i&&(t.j41(0,"tr"),t.Z7z(1,T,2,0,"td",null,t.Vm6),t.j41(3,"td"),t.nrm(4,"p-skeleton"),t.k0s()()),2&i){const e=t.XpG(3);t.R7$(),t.Dyx(e.items.headers)}}function I(i,l){if(1&i&&t.DNE(0,M,14,7,"tr")(1,x,5,0,"tr"),2&i){const e=t.XpG(2);t.vxM(0,e.isLoadingFilter?-1:0),t.R7$(),t.vxM(1,e.isLoadingFilter?1:-1)}}function L(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),t.nI1(3,"translate"),t.bIt("pageChange",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageChange(n))})("pageSizeChange",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageSizeChange(n))})("search",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onSearch(n))})("buttonClick",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openComponent())}),t.k0s(),t.DNE(4,I,2,2,"ng-template",null,0,t.C5r),t.k0s()()}if(2&i){const e=t.sdS(5),a=t.XpG();t.R7$(2),t.Y8G("items",a.items)("hasHeader",!0)("enablePagination",!1)("showBtn",a.addItem)("enableSorting",!1)("initialPageSize",a.size)("totalRecords",null==a.paginationResponse?null:a.paginationResponse.total)("bodyTemplate",e)("customTemplate",!0)("showBtn",!0)("buttonText",t.bMT(3,12,"Add country"))("HandelRenderingDataMessage",a.HandelRenderingDataMessage)}}let $=(()=>{class i extends v.j{constructor(e,a,n,s){super(s),this.router=e,this.injector=a,this.alertService=n,this.Urls=F.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:m=>{m?.id&&(console.log("edit",m.id),this.router.navigate(["/admin/shipment/countries/edit",m.id]))}},{label:"Delete",icon:"pi pi-trash text-danger",command:m=>{m?.id&&this.deleteData(m.id)}}],this.items={tableHeader:"Services",headers:["ID","Name","Created On","Actions"],data:[]}}list(e){e?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(d.C).listCountries().subscribe({next:n=>{this.categoriesList=n.data,this.items.data=n.data,this.paginationResponse={...n.meta,...n.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==n.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:n=>{this.errorMessage=n.error.errors}})}deleteData(e){this.injector.get(d.C).deleteCountry({id:e,table:"countries"}).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.list()},error:n=>{this.errorMessage=n.error.errors}})}openComponent(){this.router.navigate(["/admin/shipment/countries/add"])}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(c.Ix),t.rXU(t.zZn),t.rXU(f.n),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-list"]],standalone:!0,features:[t.Vt3,t.aNF],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/countries"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"actions",3,"click"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(a,n){1&a&&(t.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()(),t.nrm(6,"p-toast"),t.j41(7,"div",6)(8,"div",7)(9,"div",8),t.DNE(10,D,1,0,"app-loading-shimmer")(11,L,6,14,"div",9),t.k0s()()()),2&a&&(t.R7$(4),t.SpI(" ",t.bMT(5,3,"Countries"),""),t.R7$(6),t.vxM(10,n.isLoadingItems?10:-1),t.R7$(),t.vxM(11,n.isLoadingItems?-1:11))},dependencies:[p.h,p.D9,u.MB,u.y8,j.Ei,y.f,R.J,h.Mk,h.W1,c.Wk,_.tm,_.$n]})}}return i})();var r=o(9417);function G(i,l){if(1&i&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}let C=(()=>{class i{constructor(e,a,n,s){this.router=e,this.injector=a,this.fb=n,this.alertService=s,this.errorMessage="",this.isEditPage=!1,this.selectedFile=null,this.uploadForm=this.fb.group({ar_name:["",[r.k0.required,r.k0.minLength(3)]],en_name:["",[r.k0.required,r.k0.minLength(3)]]})}ngOnInit(){this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getIDfromUrl(){const a=this.router.url.match(/\/edit\/(\d+)/);a&&(this.id=a[1],this.getDataByID(this.id))}getDataByID(e){this.injector.get(d.C).getCountryByID(e).subscribe({next:n=>{this.currentData=n.data,console.log(this.currentData)},error:n=>{this.errorMessage=n.error.message}})}onFileChange(e){e.target.files.length>0&&(this.selectedFile=e.target.files[0])}submitData(){if(this.uploadForm.valid){const e=new FormData;e.append("ar_name",this.uploadForm.get("ar_name")?.value),e.append("en_name",this.uploadForm.get("en_name")?.value),this.injector.get(d.C).countries(this.uploadForm.value,this.id).subscribe({next:n=>{this.router.navigate(["/admin/shipment/countries"]),this.alertService.toast({severity:"success",summary:"",detail:n.message})},error:n=>{this.errorMessage=n.error.errors}})}}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(c.Ix),t.rXU(t.zZn),t.rXU(r.ok),t.rXU(f.n))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-form"]],standalone:!0,features:[t.aNF],decls:26,vars:23,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","autocomplete","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","autocomplete","current-en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[1,"error-message","text-danger"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"p-toast"),t.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"div",6)(16,"label",9),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",10),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",11)(22,"button",12),t.bIt("click",function(){return n.submitData()}),t.EFF(23),t.nI1(24,"translate"),t.k0s()()(),t.DNE(25,G,2,1,"div",13),t.k0s()()()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,11,n.isEditPage?"edit country":"add a new country")),t.R7$(6),t.Y8G("formGroup",n.uploadForm),t.R7$(3),t.JRh(t.bMT(12,13,"ar_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(14,15,"ar_name"))("ngModel",null==n.currentData?null:n.currentData.name),t.R7$(4),t.JRh(t.bMT(18,17,"en_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(20,19,"en_name"))("ngModel",null==n.currentData?null:n.currentData.name),t.R7$(3),t.Y8G("disabled",n.uploadForm.invalid),t.R7$(),t.JRh(t.bMT(24,21,"Save")),t.R7$(2),t.Y8G("ngIf",n.errorMessage))},dependencies:[p.h,p.D9,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.j4,r.JD,u.MB,u.y8],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return i})();const S=[{path:"",component:$},{path:"add",component:C},{path:"edit/:id",component:C}];let E=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(S),c.iI]})}}return i})(),X=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[b.MD,E]})}}return i})()}}]);