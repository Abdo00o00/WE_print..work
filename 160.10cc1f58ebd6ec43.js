"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[160],{2160:(H,g,r)=>{r.r(g),r.d(g,{ProperityHeadingModule:()=>X});var h=r(177),m=r(6627),p=r(3865),j=r(2145),T=r(7945),e=r(4438),_=r(8005),f=r(7313),C=r(5144),k=r(5779),v=r(1141),b=r(9021),c=r(9998),u=r(8018);function D(a,d){1&a&&e.nrm(0,"app-loading-shimmer")}function M(a,d){if(1&a){const t=e.RV6();e.j41(0,"li",16),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2).$implicit;return e.Njj(n.command({id:o.id}))}),e.j41(1,"a",17),e.nrm(2,"span",18),e.j41(3,"span",19),e.EFF(4),e.k0s()()()}if(2&a){const t=d.$implicit;e.R7$(),e.BMQ("aria-label",t.label),e.R7$(),e.HbH(t.icon),e.R7$(2),e.JRh(t.label)}}function I(a,d){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"div",12),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.viewDetails(n))}),e.j41(9,"div")(10,"p-menu",13,1),e.DNE(12,M,5,4,"ng-template",14),e.k0s(),e.j41(13,"p-button",15),e.bIt("onClick",function(n){e.eBV(t);const o=e.sdS(11);return e.Njj(o.toggle(n))}),e.k0s()()()()()}if(2&a){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.Lme("",t.id," ",t.lastName,""),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.created_at),e.R7$(4),e.Y8G("model",i.actionOptions)("popup",!0),e.R7$(3),e.Y8G("text",!0)}}function L(a,d){1&a&&(e.j41(0,"td"),e.nrm(1,"p-skeleton"),e.k0s())}function $(a,d){if(1&a&&(e.j41(0,"tr"),e.Z7z(1,L,2,0,"td",null,e.Vm6),e.j41(3,"td"),e.nrm(4,"p-skeleton"),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(),e.Dyx(t.items.headers)}}function x(a,d){if(1&a&&e.DNE(0,I,14,7,"tr")(1,$,5,0,"tr"),2&a){const t=e.XpG(2);e.vxM(0,t.isLoadingFilter?-1:0),e.R7$(),e.vxM(1,t.isLoadingFilter?1:-1)}}function G(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),e.nI1(3,"translate"),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChange(n))})("pageSizeChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageSizeChange(n))})("search",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onSearch(n))})("buttonClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openComponent())}),e.k0s(),e.DNE(4,x,2,2,"ng-template",null,0,e.C5r),e.k0s()()}if(2&a){const t=e.sdS(5),i=e.XpG();e.R7$(2),e.Y8G("items",i.items)("hasHeader",!0)("enablePagination",!1)("showBtn",i.addItem)("enableSorting",!1)("initialPageSize",i.size)("totalRecords",null==i.paginationResponse?null:i.paginationResponse.total)("bodyTemplate",t)("customTemplate",!0)("showBtn",!0)("buttonText",e.bMT(3,12,"Add properties heading"))("HandelRenderingDataMessage",i.HandelRenderingDataMessage)}}let S=(()=>{class a extends j.j{constructor(t,i,n,o){super(o),this.router=t,this.injector=i,this.alertService=n,this.Urls=T.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:l=>{l?.id&&(console.log("edit",l.id),this.router.navigate(["/admin/properties-headings/edit",l.id]))}},{label:"Delete",icon:"pi pi-trash text-danger",command:l=>{l?.id&&this.deleteData(l.id)}}],this.items={tableHeader:"Services",headers:["ID","Name","Created On","Actions"],data:[]}}list(t){t?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(p.h).listPropertiesHeadings().subscribe({next:n=>{this.categoriesList=n.data,this.items.data=n.data,this.paginationResponse={...n.meta,...n.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==n.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:n=>{this.errorMessage=n.error.errors}})}deleteData(t){this.injector.get(p.h).deletePropertiesHeadings({id:t,table:"properties_heading"}).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.list()},error:n=>{this.errorMessage=n.error.errors}})}openComponent(){this.router.navigate(["/admin/properties-headings/add"])}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.Ix),e.rXU(e.zZn),e.rXU(_.n),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-list"]],features:[e.Vt3],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/properties-headings"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"actions",3,"click"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(i,n){1&i&&(e.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()(),e.nrm(6,"p-toast"),e.j41(7,"div",6)(8,"div",7)(9,"div",8),e.DNE(10,D,1,0,"app-loading-shimmer")(11,G,6,14,"div",9),e.k0s()()()),2&i&&(e.R7$(4),e.SpI(" ",e.bMT(5,3,"Properties headings"),""),e.R7$(6),e.vxM(10,n.isLoadingItems?10:-1),e.R7$(),e.vxM(11,n.isLoadingItems?-1:11))},dependencies:[m.Wk,f.f,C.W1,k.Ei,v.$n,b.J,c.y8,u.D9]})}}return a})();var F=r(467),s=r(9417),R=r(8848);function B(a,d){if(1&a&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}let y=(()=>{class a{constructor(t,i,n,o){this.router=t,this.injector=i,this.fb=n,this.alertService=o,this.errorMessage="",this.isEditPage=!1,this.selectedFile=null,this.fileAddedBeforeArrayMuti=[],this.uploadForm=this.fb.group({ar_name:["",[s.k0.required,s.k0.minLength(3)]],en_name:["",[s.k0.required,s.k0.minLength(3)]]})}ngOnInit(){this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getIDfromUrl(){const i=this.router.url.match(/\/edit\/(\d+)/);i&&(this.id=i[1],this.getDataByID(this.id))}getDataByID(t){this.injector.get(p.h).gePropertyHeadingDataByID(t).subscribe({next:n=>{this.currentData=n.data,console.log(this.currentData)},error:n=>{this.errorMessage=n.error.message}})}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0])}changeValue(t,i){return this.uploadForm.get(i)?.setValue(t),!0}changeTouche(t){return this.uploadForm.get(t)?.markAsTouched(),!0}onRemoveFile(t){var i=this;return(0,F.A)(function*(){i.uploadForm.get("image")?.reset(null),t.length&&i.onUploadSuccess(t)})()}onUploadSuccess(t){var i=this;return(0,F.A)(function*(){i.selectedFile=t})()}submitData(){if(this.uploadForm.valid){const t=new FormData;t.append("ar_name",this.uploadForm.get("ar_name")?.value),t.append("en_name",this.uploadForm.get("en_name")?.value),t.append("image",this.selectedFile),this.isEditPage&&t.append("_method","PUT"),this.injector.get(p.h).propertiesHeadings(t,this.id).subscribe({next:n=>{this.router.navigate(["/admin/properties-headings"]),this.alertService.toast({severity:"success",summary:"",detail:n.message})},error:n=>{this.errorMessage=n.error.errors}})}}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.Ix),e.rXU(e.zZn),e.rXU(s.ok),e.rXU(_.n))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-form"]],decls:31,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","autocomplete","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","autocomplete","current-en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","image",1,"form-label"],[3,"onClick","fileRemoved","fileAdded","fileAddedBefore","isMultiple","maxFiles","accepts"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[1,"error-message","text-danger"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"p-toast"),e.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"input",8),e.nI1(14,"translate"),e.k0s(),e.j41(15,"div",6)(16,"label",9),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.nrm(19,"input",10),e.nI1(20,"translate"),e.k0s(),e.j41(21,"div",6)(22,"label",11),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"app-upload-files",12),e.bIt("onClick",function(l){return n.changeValue(l,"image")})("onClick",function(){return n.changeTouche("image")})("fileRemoved",function(l){return n.onRemoveFile(l)})("fileAdded",function(l){return n.onUploadSuccess(l)}),e.k0s()(),e.j41(26,"div",13)(27,"button",14),e.bIt("click",function(){return n.submitData()}),e.EFF(28),e.nI1(29,"translate"),e.k0s()()(),e.DNE(30,B,2,1,"div",15),e.k0s()()()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,15,n.isEditPage?"edit property heading":"add a new property heading")),e.R7$(6),e.Y8G("formGroup",n.uploadForm),e.R7$(3),e.JRh(e.bMT(12,17,"ar_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(14,19,"ar_name"))("ngModel",null==n.currentData?null:n.currentData.name),e.R7$(4),e.JRh(e.bMT(18,21,"en_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(20,23,"en_name"))("ngModel",null==n.currentData?null:n.currentData.name),e.R7$(4),e.JRh(e.bMT(24,25,"image")),e.R7$(2),e.Y8G("fileAddedBefore",n.fileAddedBeforeArrayMuti)("isMultiple",!1)("maxFiles",1e6),e.R7$(2),e.Y8G("disabled",n.uploadForm.invalid),e.R7$(),e.JRh(e.bMT(29,27,"Save")),e.R7$(2),e.Y8G("ngIf",n.errorMessage))},dependencies:[h.bT,s.qT,s.me,s.BC,s.cb,s.YS,s.j4,s.JD,c.y8,R.q,u.D9],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return a})();const E=[{path:"",component:S},{path:"add",component:y},{path:"edit/:id",component:y}];let P=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(E),m.iI]})}}return a})(),X=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[h.MD,P,u.h,s.X1,f.f,C.Mk,v.tm,b.J,c.MB,R.q]})}}return a})()}}]);