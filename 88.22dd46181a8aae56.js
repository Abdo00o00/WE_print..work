"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[88],{88:(N,g,r)=>{r.r(g),r.d(g,{ShipingPricesModule:()=>X});var c=r(177),d=r(6627),v=r(2145),R=r(7945),u=r(1329),m=r(8018),p=r(9998),F=r(7313),y=r(9021),f=r(1141),_=r(5144),t=r(4438),b=r(8005),j=r(5779);function M(a,l){1&a&&t.nrm(0,"app-loading-shimmer")}function k(a,l){if(1&a){const e=t.RV6();t.j41(0,"li",16),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2).$implicit;return t.Njj(i.command({id:s.id}))}),t.j41(1,"a",17),t.nrm(2,"span",18),t.j41(3,"span",19),t.EFF(4),t.k0s()()()}if(2&a){const e=l.$implicit;t.R7$(),t.BMQ("aria-label",e.label),t.R7$(),t.HbH(e.icon),t.R7$(2),t.JRh(e.label)}}function T(a,l){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td")(14,"div",12)(15,"div")(16,"p-menu",13,1),t.DNE(18,k,5,4,"ng-template",14),t.k0s(),t.j41(19,"p-button",15),t.bIt("onClick",function(i){t.eBV(e);const s=t.sdS(17);return t.Njj(s.toggle(i))}),t.k0s()()()()()}if(2&a){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.SpI("",e.id," "),t.R7$(2),t.JRh(e.area),t.R7$(2),t.JRh(e.city.name),t.R7$(2),t.JRh(e.price),t.R7$(2),t.JRh(e.user.username),t.R7$(2),t.JRh(e.created_at),t.R7$(4),t.Y8G("model",n.actionOptions)("popup",!0),t.R7$(3),t.Y8G("text",!0)}}function $(a,l){1&a&&(t.j41(0,"td"),t.nrm(1,"p-skeleton"),t.k0s())}function D(a,l){if(1&a&&(t.j41(0,"tr"),t.Z7z(1,$,2,0,"td",null,t.Vm6),t.j41(3,"td"),t.nrm(4,"p-skeleton"),t.k0s()()),2&a){const e=t.XpG(3);t.R7$(),t.Dyx(e.items.headers)}}function I(a,l){if(1&a&&t.DNE(0,T,20,9,"tr")(1,D,5,0,"tr"),2&a){const e=t.XpG(2);t.vxM(0,e.isLoadingFilter?-1:0),t.R7$(),t.vxM(1,e.isLoadingFilter?1:-1)}}function L(a,l){if(1&a){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),t.nI1(3,"translate"),t.bIt("pageChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageChange(i))})("pageSizeChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageSizeChange(i))})("search",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.onSearch(i))})("buttonClick",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openComponent())}),t.k0s(),t.DNE(4,I,2,2,"ng-template",null,0,t.C5r),t.k0s()()}if(2&a){const e=t.sdS(5),n=t.XpG();t.R7$(2),t.Y8G("items",n.items)("hasHeader",!0)("enablePagination",!1)("showBtn",n.addItem)("enableSorting",!1)("initialPageSize",n.size)("totalRecords",null==n.paginationResponse?null:n.paginationResponse.total)("bodyTemplate",e)("customTemplate",!0)("showBtn",!0)("buttonText",t.bMT(3,12,"Add shipment prices"))("HandelRenderingDataMessage",n.HandelRenderingDataMessage)}}let E=(()=>{class a extends v.j{constructor(e,n,i,s){super(s),this.router=e,this.injector=n,this.alertService=i,this.Urls=R.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:h=>{h?.id&&(console.log("edit",h.id),this.router.navigate(["/admin/shipment/edit",h.id]))}}],this.items={tableHeader:"Services",headers:["ID","Area","City","Price","Created BY","Created On","Actions"],data:[]}}openComponent(){this.router.navigate(["/admin/shipment/add"])}list(e){e?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(u.m).listShipmentPrices().subscribe({next:i=>{this.categoriesList=i.data,this.items.data=i.data,this.paginationResponse={...i.meta,...i.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==i.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:i=>{this.errorMessage=i.error.errors}})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(d.Ix),t.rXU(t.zZn),t.rXU(b.n),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-list"]],standalone:!0,features:[t.Vt3,t.aNF],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/shipment"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"actions"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(n,i){1&n&&(t.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()(),t.nrm(6,"p-toast"),t.j41(7,"div",6)(8,"div",7)(9,"div",8),t.DNE(10,M,1,0,"app-loading-shimmer")(11,L,6,14,"div",9),t.k0s()()()),2&n&&(t.R7$(4),t.SpI(" ",t.bMT(5,3,"shipment prices"),""),t.R7$(6),t.vxM(10,i.isLoadingItems?10:-1),t.R7$(),t.vxM(11,i.isLoadingItems?-1:11))},dependencies:[m.h,m.D9,p.MB,p.y8,j.Ei,F.f,y.J,_.Mk,_.W1,d.Wk,f.tm,f.$n,c.MD]})}}return a})();var o=r(9417),S=r(2941);function x(a,l){if(1&a&&(t.j41(0,"option",20),t.EFF(1),t.k0s()),2&a){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function G(a,l){if(1&a&&(t.j41(0,"div",21),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}let C=(()=>{class a{constructor(e,n,i,s){this.router=e,this.injector=n,this.alertService=i,this.fb=s,this.errorMessage="",this.isEditPage=!1,this.selectedFile=null,this.list=[],this.uploadForm=this.fb.group({ar_area:["",[o.k0.required,o.k0.minLength(3)]],en_area:["",[o.k0.required,o.k0.minLength(3)]],city_id:["",[o.k0.required]],price:["",[o.k0.required]]})}ngOnInit(){this.getAllCountries(),this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getIDfromUrl(){const n=this.router.url.match(/\/edit\/(\d+)/);n&&(this.id=n[1],this.getDataByID(this.id))}getDataByID(e){this.injector.get(u.m).getShipmentPriceByID(e).subscribe({next:i=>{this.currentData=i.data,console.log(this.currentData)},error:i=>{this.errorMessage=i.error.errors}})}getAllCountries(){this.injector.get(S.d).listCities().subscribe({next:n=>{this.list=n.data},error:n=>{this.errorMessage=n.error.errors}})}submitData(){this.uploadForm.valid&&this.injector.get(u.m).shipmentPrices(this.uploadForm.value,this.id).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.router.navigate(["/admin/shipment/cities"])},error:n=>{this.errorMessage=n.error.message}})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(d.Ix),t.rXU(t.zZn),t.rXU(b.n),t.rXU(o.ok))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-form"]],standalone:!0,features:[t.aNF],decls:42,vars:41,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","city_id",1,"form-label"],["formControlName","city_id",1,"form-select","mb-3",3,"ariaPlaceholder","ngModel"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","price",1,"form-label"],["type","number","id","price","required","","formControlName","price",1,"form-control",3,"placeholder","ngModel"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[3,"value"],[1,"error-message","text-danger"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"p-toast"),t.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"div",6)(16,"label",9),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",10),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",6)(22,"label",11),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"select",12),t.nI1(26,"translate"),t.j41(27,"option",13),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.DNE(30,x,2,2,"option",14),t.k0s()(),t.j41(31,"div",6)(32,"label",15),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.nrm(35,"input",16),t.nI1(36,"translate"),t.k0s(),t.j41(37,"div",17)(38,"button",18),t.bIt("click",function(){return i.submitData()}),t.EFF(39),t.nI1(40,"translate"),t.k0s()()(),t.DNE(41,G,2,1,"div",19),t.k0s()()()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,19,i.isEditPage?"edit shipment prices":"add a new shipment price")),t.R7$(6),t.Y8G("formGroup",i.uploadForm),t.R7$(3),t.JRh(t.bMT(12,21,"ar_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(14,23,"ar_name"))("ngModel",null==i.currentData?null:i.currentData.name),t.R7$(4),t.JRh(t.bMT(18,25,"en_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(20,27,"en_name"))("ngModel",null==i.currentData?null:i.currentData.name),t.R7$(4),t.JRh(t.bMT(24,29,"City")),t.R7$(2),t.Y8G("ariaPlaceholder",t.bMT(26,31,"city"))("ngModel",null==i.currentData?null:i.currentData.city_id),t.R7$(3),t.JRh(t.bMT(29,33,"Select city")),t.R7$(2),t.Y8G("ngForOf",i.list),t.R7$(3),t.JRh(t.bMT(34,35,"price")),t.R7$(2),t.Y8G("placeholder",t.bMT(36,37,"price"))("ngModel",null==i.currentData?null:i.currentData.price),t.R7$(3),t.Y8G("disabled",i.uploadForm.invalid),t.R7$(),t.JRh(t.bMT(40,39,"Save")),t.R7$(2),t.Y8G("ngIf",i.errorMessage))},dependencies:[m.h,m.D9,o.X1,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.YS,o.j4,o.JD,p.MB,p.y8,c.MD,c.Sq,c.bT],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return a})();const B=[{path:"",component:E},{path:"add",component:C},{path:"edit/:id",component:C}];let P=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(B),d.iI]})}}return a})(),X=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[c.MD,P]})}}return a})()}}]);