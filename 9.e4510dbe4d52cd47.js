"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9],{9:(U,h,o)=>{o.r(h),o.d(h,{CitiesModule:()=>X});var d=o(177),m=o(6627),p=o(8018),_=o(1141),f=o(5144),u=o(9998),b=o(2145),F=o(9021),y=o(7313),R=o(7945),g=o(2941),t=o(4438),C=o(8005),j=o(5779);function M(i,l){1&i&&t.nrm(0,"app-loading-shimmer")}function D(i,l){if(1&i){const e=t.RV6();t.j41(0,"li",17),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(2).$implicit;return t.Njj(n.command({id:r.id}))}),t.j41(1,"a",18),t.nrm(2,"span",19),t.j41(3,"span",20),t.EFF(4),t.k0s()()()}if(2&i){const e=l.$implicit;t.R7$(),t.BMQ("aria-label",e.label),t.R7$(),t.HbH(e.icon),t.R7$(2),t.JRh(e.label)}}function T(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",12),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"div",13)(13,"div")(14,"p-menu",14,1),t.DNE(16,D,5,4,"ng-template",15),t.k0s(),t.j41(17,"p-button",16),t.bIt("onClick",function(n){t.eBV(e);const r=t.sdS(15);return t.Njj(r.toggle(n))}),t.k0s()()()()()}if(2&i){const e=t.XpG().$implicit,a=t.XpG(2);t.R7$(2),t.Lme("",e.id," ",e.lastName,""),t.R7$(2),t.JRh(e.name),t.R7$(2),t.Y8G("ngClass",null!=e&&e.is_active?"bg-success":"bg-danger"),t.R7$(),t.JRh(t.bMT(8,9,e.is_active?"Active":"Not active")),t.R7$(3),t.JRh(e.created_at),t.R7$(4),t.Y8G("model",a.actionOptions)("popup",!0),t.R7$(3),t.Y8G("text",!0)}}function k(i,l){1&i&&(t.j41(0,"td"),t.nrm(1,"p-skeleton"),t.k0s())}function $(i,l){if(1&i&&(t.j41(0,"tr"),t.Z7z(1,k,2,0,"td",null,t.Vm6),t.j41(3,"td"),t.nrm(4,"p-skeleton"),t.k0s()()),2&i){const e=t.XpG(3);t.R7$(),t.Dyx(e.items.headers)}}function I(i,l){if(1&i&&t.DNE(0,T,18,11,"tr")(1,$,5,0,"tr"),2&i){const e=t.XpG(2);t.vxM(0,e.isLoadingFilter?-1:0),t.R7$(),t.vxM(1,e.isLoadingFilter?1:-1)}}function x(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"app-dynamic-table",11),t.nI1(3,"translate"),t.bIt("pageChange",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onPageChange(n))})("pageSizeChange",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onPageSizeChange(n))})("search",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onSearch(n))})("buttonClick",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openComponent())}),t.k0s(),t.DNE(4,I,2,2,"ng-template",null,0,t.C5r),t.k0s()()}if(2&i){const e=t.sdS(5),a=t.XpG();t.R7$(2),t.Y8G("items",a.items)("hasHeader",!0)("enablePagination",!1)("showBtn",a.addItem)("enableSorting",!1)("initialPageSize",a.size)("totalRecords",null==a.paginationResponse?null:a.paginationResponse.total)("bodyTemplate",e)("customTemplate",!0)("showBtn",!0)("buttonText",t.bMT(3,12,"Add city"))("HandelRenderingDataMessage",a.HandelRenderingDataMessage)}}let L=(()=>{class i extends b.j{constructor(e,a,n,r){super(r),this.router=e,this.injector=a,this.alertService=n,this.Urls=R.f,this.isLoadingFilter=!1,this.isLoadingItems=!0,this.categoriesList=[],this.actionOptions=[{label:"Edit",icon:"pi pi-pencil",command:c=>{c?.id&&(console.log("edit",c.id),this.router.navigate(["/admin/shipment/cities/edit",c.id]))}},{label:"Delete",icon:"pi pi-trash text-danger",command:c=>{c?.id&&this.deleteData(c.id)}}],this.items={tableHeader:"Services",headers:["ID","Name","Status","Created On","Actions"],data:[]}}openComponent(){this.router.navigate(["/admin/shipment/cities/add"])}list(e){e?this.isLoadingFilter=!0:this.isLoadingItems=!0,this.HandelRenderingDataMessage="Loading...",this.injector.get(g.d).listCities().subscribe({next:n=>{this.categoriesList=n.data,this.items.data=n.data,this.paginationResponse={...n.meta,...n.links},this.isLoadingItems=!1,this.isLoadingFilter=!1,0==n.data.length&&(this.HandelRenderingDataMessage="No Data Found"),this.cdr.detectChanges()},error:n=>{this.errorMessage=n.error.errors}})}deleteData(e){this.injector.get(g.d).deleteCity({id:e,table:"cities"}).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.list()},error:n=>{this.errorMessage=n.error.errors}})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(m.Ix),t.rXU(t.zZn),t.rXU(C.n),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-list"]],standalone:!0,features:[t.Vt3,t.aNF],decls:12,vars:5,consts:[["customBodyTemplate",""],["menu",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/shipment/cities"],[1,"d-flex","justify-content-center","h-100"],[1,"card","w-100","border-0"],[1,"card-body","pt-0"],[1,"row","h-100"],[1,"col-12","my-2"],[3,"pageChange","pageSizeChange","search","buttonClick","items","hasHeader","enablePagination","showBtn","enableSorting","initialPageSize","totalRecords","bodyTemplate","customTemplate","buttonText","HandelRenderingDataMessage"],[1,"badge",3,"ngClass"],[1,"actions"],["appendTo","body",3,"model","popup"],["pTemplate","option"],["icon","pi pi-ellipsis-v","severity","secondary",3,"onClick","text"],["pMenuItem","",3,"click"],[1,"p-ripple","p-element","p-menuitem-link","small"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"]],template:function(a,n){1&a&&(t.j41(0,"nav",2)(1,"ol",3)(2,"li",4)(3,"a",5),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()(),t.nrm(6,"p-toast"),t.j41(7,"div",6)(8,"div",7)(9,"div",8),t.DNE(10,M,1,0,"app-loading-shimmer")(11,x,6,14,"div",9),t.k0s()()()),2&a&&(t.R7$(4),t.SpI(" ",t.bMT(5,3,"Cities"),""),t.R7$(6),t.vxM(10,n.isLoadingItems?10:-1),t.R7$(),t.vxM(11,n.isLoadingItems?-1:11))},dependencies:[p.h,p.D9,u.MB,u.y8,j.Ei,y.f,F.J,f.Mk,f.W1,m.Wk,_.tm,_.$n,d.MD,d.YU]})}}return i})();var E=o(5593),s=o(9417);function G(i,l){if(1&i&&(t.j41(0,"option",18),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function S(i,l){if(1&i&&(t.j41(0,"div",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}let v=(()=>{class i{constructor(e,a,n,r){this.router=e,this.injector=a,this.alertService=n,this.fb=r,this.errorMessage="",this.isEditPage=!1,this.selectedFile=null,this.list=[],this.uploadForm=this.fb.group({ar_name:["",[s.k0.required,s.k0.minLength(3)]],en_name:["",[s.k0.required,s.k0.minLength(3)]],country_id:["",[s.k0.required]]})}ngOnInit(){this.getAllCountries(),this.isEditPage=this.router.url.indexOf("edit")>-1,this.isEditPage&&this.getIDfromUrl()}getIDfromUrl(){const a=this.router.url.match(/\/edit\/(\d+)/);a&&(this.id=a[1],this.getDataByID(this.id))}getDataByID(e){this.injector.get(g.d).getCityByID(e).subscribe({next:n=>{this.currentData=n.data},error:n=>{this.errorMessage=n.error.errors}})}getAllCountries(){this.injector.get(E.C).listCountries().subscribe({next:a=>{this.list=a.data},error:a=>{this.errorMessage=a.error.errors}})}submitData(){if(this.uploadForm.valid){const e=new FormData;e.append("ar_name",this.uploadForm.get("ar_name")?.value),e.append("en_name",this.uploadForm.get("en_name")?.value),e.append("country_id",this.uploadForm.get("country_id")?.value),this.injector.get(g.d).cities(this.uploadForm.value,this.id).subscribe({next:n=>{this.alertService.toast({severity:"success",summary:"",detail:n.message}),this.router.navigate(["/admin/shipment/cities"])},error:n=>{this.errorMessage=n.error.message}})}}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(m.Ix),t.rXU(t.zZn),t.rXU(C.n),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-form"]],standalone:!0,features:[t.aNF],decls:36,vars:34,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"forms-sample",3,"formGroup"],[1,"mb-3"],["for","ar_name",1,"form-label"],["type","text","id","ar_name","required","","formControlName","ar_name",1,"form-control",3,"placeholder","ngModel"],["for","en_name",1,"form-label"],["type","text","id","en_name","required","","formControlName","en_name",1,"form-control",3,"placeholder","ngModel"],["for","country_id",1,"form-label"],["formControlName","country_id",1,"form-select","mb-3",3,"ariaPlaceholder","ngModel"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","d-flex","align-items-center","justify-content-end"],["type","submit",1,"btn","btn-solid-main",3,"click","disabled"],["class","error-message text-danger",4,"ngIf"],[3,"value"],[1,"error-message","text-danger"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"p-toast"),t.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"form",5)(9,"div",6)(10,"label",7),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"div",6)(16,"label",9),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",10),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",6)(22,"label",11),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"select",12),t.nI1(26,"translate"),t.j41(27,"option",13),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.DNE(30,G,2,2,"option",14),t.k0s()(),t.j41(31,"div",15)(32,"button",16),t.bIt("click",function(){return n.submitData()}),t.EFF(33),t.nI1(34,"translate"),t.k0s()()(),t.DNE(35,S,2,1,"div",17),t.k0s()()()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,16,n.isEditPage?"edit city":"add a new city")),t.R7$(6),t.Y8G("formGroup",n.uploadForm),t.R7$(3),t.JRh(t.bMT(12,18,"ar_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(14,20,"ar_name"))("ngModel",null==n.currentData?null:n.currentData.name),t.R7$(4),t.JRh(t.bMT(18,22,"en_name")),t.R7$(2),t.Y8G("placeholder",t.bMT(20,24,"en_name"))("ngModel",null==n.currentData?null:n.currentData.name),t.R7$(4),t.JRh(t.bMT(24,26,"Country")),t.R7$(2),t.Y8G("ariaPlaceholder",t.bMT(26,28,"country"))("ngModel",null==n.currentData?null:n.currentData.country_id),t.R7$(3),t.JRh(t.bMT(29,30,"Select country")),t.R7$(2),t.Y8G("ngForOf",n.list),t.R7$(2),t.Y8G("disabled",n.uploadForm.invalid),t.R7$(),t.JRh(t.bMT(34,32,"Save")),t.R7$(2),t.Y8G("ngIf",n.errorMessage))},dependencies:[p.h,p.D9,s.X1,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.YS,s.j4,s.JD,u.MB,u.y8,d.MD,d.Sq,d.bT],styles:[".card-header[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary-color)!important;font-weight:bolder;border:0px}"]})}}return i})();const N=[{path:"",component:L},{path:"add",component:v},{path:"edit/:id",component:v}];let B=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(N),m.iI]})}}return i})(),X=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[d.MD,B]})}}return i})()}}]);